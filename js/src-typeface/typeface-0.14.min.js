/*****************************************************************

typeface.js, version 0.14 | typefacejs.neocracy.org

Copyright (c) 2008 - 2009, David Chester davidchester@gmx.net 

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.

*****************************************************************/
(function(){var g="l ",a=",",m="underline",l="canvas",d="px",e="vml",k="typeface-js-selected-text",c=" ",j="function",b="normal",f="horizontal",i={faces:{},loadFace:function(a){var c=this,b=a.familyName.toLowerCase();if(!c.faces[b])c.faces[b]={};if(!c.faces[b][a.cssFontWeight])c.faces[b][a.cssFontWeight]={};var d=c.faces[b][a.cssFontWeight][a.cssFontStyle]=a;d.loaded=true},log:function(a){if(this.quiet)return;a="typeface.js: "+a;if(this.customLogFn)this.customLogFn(a);else window.console&&window.console.log&&window.console.log(a)},pixelsFromPoints:function(e,a,d,c){var b=d*parseInt(a.fontSize)*72/(e.resolution*100);if(c==f&&a.fontStretchPercent)b*=a.fontStretchPercent;return b},pointsFromPixels:function(e,a,d,c){var b=d*e.resolution/(parseInt(a.fontSize)*72/100);if(c==f&&a.fontStretchPrecent)b*=a.fontStretchPercent;return b},cssFontWeightMap:{normal:b,bold:"bold",400:b,700:"bold"},cssFontStretchMap:{"ultra-condensed":.55,"extra-condensed":.77,condensed:.85,"semi-condensed":.93,normal:1,"semi-expanded":1.07,expanded:1.15,"extra-expanded":1.23,"ultra-expanded":1.45,"default":1},fallbackCharacter:".",configure:function(c){var b="customLogFn";for(var e=[b,"customClassNameRegex","customTypefaceElementsList","quiet","verbose","disableSelection"],d=0;d<e.length;d++){var a=e[d];if(c[a])if(a==b)if(typeof c[a]!=j)throw"customLogFn is not a function";else this.customLogFn=c.customLogFn;else this[a]=c[a]}},getTextExtents:function(c,i,e){for(var d=0,j=0,g,h=e.length,a=0;a<h;a++){var b=c.glyphs[e.charAt(a)]?c.glyphs[e.charAt(a)]:c.glyphs[this.fallbackCharacter],f=this.pointsFromPixels(c,i,i.letterSpacing);d+=a+1==h?Math.max(b.x_max,b.ha):b.ha;d+=f;g+=b.ha+f}return{x:d,y:j,ha:g}},pixelsFromCssAmount:function(c,d,a){var f=undefined;if(c==b)return d;else if(f=c.match(/([\-\d+\.]+)px/))return f[1];else{var e,h=a.style.left,g=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;if(!c.match(/\d(px|pt)$/))a.style.left="1em";else a.style.left=c||0;e=a.style.pixelLeft;a.style.left=h;a.runtimeStyle.left=g;return e||d}},capitalizeText:function(a){return a.replace(/(^|\s)[a-z]/g,function(a){return a.toUpperCase()})},getElementStyle:function(a){return window.getComputedStyle?window.getComputedStyle(a,""):a.currentStyle?a.currentStyle:void 0},getRenderedText:function(h){var p="font-stretch",f=this,i=f.getElementStyle(h.parentNode),j=h.parentNode.getAttribute("style");if(j&&typeof j=="object")j=j.cssText;if(j)for(var t=j.split(/\s*\;\s*/),q={},m=0;m<t.length;m++){var z=t[m],u=z.split(/\s*\:\s*/);q[u[0]]=u[1]}var g={color:i.color,fontFamily:i.fontFamily.split(/\s*,\s*/)[0].replace(/(^"|^'|'$|"$)/g,"").toLowerCase(),fontSize:f.pixelsFromCssAmount(i.fontSize,12,h.parentNode),fontWeight:f.cssFontWeightMap[i.fontWeight],fontStyle:i.fontStyle?i.fontStyle:b,fontStretchPercent:f.cssFontStretchMap[q&&q[p]?q[p]:"default"],textDecoration:i.textDecoration,lineHeight:f.pixelsFromCssAmount(i.lineHeight,b,h.parentNode),letterSpacing:f.pixelsFromCssAmount(i.letterSpacing,0,h.parentNode),textTransform:i.textTransform},s;if(f.faces[g.fontFamily]&&f.faces[g.fontFamily][g.fontWeight])s=f.faces[g.fontFamily][g.fontWeight][g.fontStyle];var a=h.nodeValue;if(h.previousSibling&&h.previousSibling.nodeType==1&&h.previousSibling.tagName!="BR"&&f.getElementStyle(h.previousSibling).display.match(/inline/))a=a.replace(/^\s+/,c);else a=a.replace(/^\s+/,"");if(h.nextSibling&&h.nextSibling.nodeType==1&&h.nextSibling.tagName!="BR"&&f.getElementStyle(h.nextSibling).display.match(/inline/))a=a.replace(/\s+$/,c);else a=a.replace(/\s+$/,"");a=a.replace(/\s+/g,c);if(g.textTransform&&g.textTransform!="none")switch(g.textTransform){case"capitalize":a=f.capitalizeText(a);break;case"uppercase":a=a.toUpperCase();break;case"lowercase":a=a.toLowerCase()}if(!s){var v=12,w=a.substring(0,v);if(a.length>v)w+="...";var r=g.fontFamily;if(g.fontWeight!=b)r+=c+g.fontWeight;if(g.fontStyle!=b)r+=c+g.fontStyle;f.log("couldn't find typeface font: "+r+' for text "'+w+'"');return}var x=a.split(/\b(?=\w)/),o=document.createElement("span");o.className="typeface-js-vector-container";for(var A=x.length,m=0;m<A;m++){var y=x[m],n=f.renderWord(s,g,y);if(n){o.appendChild(n.element);if(!f.disableSelection){var l=document.createElement("span");l.className=k;var B=document.createTextNode(y);l.appendChild(B);if(f.vectorBackend!=e)l.style.marginLeft=-1*(n.width+1)+d;l.targetWidth=n.width;if(f.vectorBackend==e)n.element.appendChild(l);else o.appendChild(l)}}}return o},renderDocument:function(c){if(!c)c=function(a){a.style.visibility="visible"};for(var a=document.getElementsByTagName("*"),f=a.length,b=0;b<a.length;b++)if(a[b].className.match(/(^|\s)typeface-js(\s|$)/)||a[b].tagName.match(/^(H1|H2|H3|H4|H5|H6)$/)){this.replaceText(a[b]);typeof c==j&&c(a[b])}if(this.vectorBackend==e){var d=document.createElement("v:shape");d.style.display="none";document.body.appendChild(d)}},replaceText:function(a){var h="inline-block",f=this;for(var n=[],j=a.childNodes.length,g=0;g<j;g++)f.replaceText(a.childNodes[g]);if(a.nodeType==3&&a.nodeValue.match(/\S/)){var b=a.parentNode;if(b.className==k)return;var c=f.getRenderedText(a);if(b.tagName=="A"&&f.vectorBackend==e&&f.getElementStyle(b).display=="inline"){b.style.display=h;b.style.cursor="pointer"}if(f.getElementStyle(b).display=="inline")b.style.display=h;if(c){if(b.replaceChild)b.replaceChild(c,a);else{b.insertBefore(c,a);b.removeChild(a)}if(f.vectorBackend==e)c.innerHTML=c.innerHTML;for(var j=c.childNodes.length,g;g<j;g++){var a=c.childNodes[g];if(a.hasChildNodes()&&!a.targetWidth)a=a.childNodes[0];if(a&&a.targetWidth){var l=a.innerHTML.length,m=a.targetWidth-a.offsetWidth,i=m/(l||1);if(f.vectorBackend==e)i=Math.ceil(i);a.style.letterSpacing=i+d;a.style.width=a.targetWidth+d}}}}},applyElementVerticalMetrics:function(c,a,f){if(a.lineHeight==b)a.lineHeight=this.pixelsFromPoints(c,a,c.lineHeight);var e=a.lineHeight-this.pixelsFromPoints(c,a,c.lineHeight);f.style.marginTop=Math.round(e/2)+d;f.style.marginBottom=Math.round(e/2)+d},vectorBackends:{canvas:{_initializeSurface:function(b,a,j){var e=this,g=e.getTextExtents(b,a,j),c=document.createElement(l);if(e.disableSelection)c.innerHTML=j;c.height=Math.round(e.pixelsFromPoints(b,a,b.lineHeight));c.width=Math.round(e.pixelsFromPoints(b,a,g.x,f));e.applyElementVerticalMetrics(b,a,c);if(g.x>g.ha)c.style.marginRight=Math.round(e.pixelsFromPoints(b,a,g.x-g.ha,f))+d;var h=c.getContext("2d"),i=e.pixelsFromPoints(b,a,1);h.scale(i*a.fontStretchPercent,-1*i);h.translate(0,-1*b.ascender);h.fillStyle=a.color;return{context:h,canvas:c}},_renderGlyph:function(f,h,l,g){var e=h.glyphs[l];if(!e)return this.renderGlyph(f,h,this.fallbackCharacter,g);if(e.o){var a;if(e.cached_outline)a=e.cached_outline;else{a=e.o.split(c);e.cached_outline=a}for(var j=a.length,d=0;d<j;){var k=a[d++];switch(k){case"m":f.moveTo(a[d++],a[d++]);break;case"l":f.lineTo(a[d++],a[d++]);break;case"q":var m=a[d++],n=a[d++];f.quadraticCurveTo(a[d++],a[d++],m,n);break;case"b":var o=a[d++],p=a[d++];f.bezierCurveTo(a[d++],a[d++],a[d++],a[d++],o,p)}}}if(e.ha){var i=g.letterSpacing&&g.letterSpacing!=b?this.pointsFromPixels(h,g,g.letterSpacing):0;f.translate(e.ha+i,0)}},_renderWord:function(b,c,g){var e=this.initializeSurface(b,c,g),a=e.context,i=e.canvas;a.beginPath();a.save();for(var f=g.split(""),h=f.length,d=0;d<h;d++)this.renderGlyph(a,b,f[d],c);a.fill();if(c.textDecoration==m){a.beginPath();a.moveTo(0,b.underlinePosition);a.restore();a.lineTo(0,b.underlinePosition);a.strokeStyle=c.color;a.lineWidth=b.underlineThickness;a.stroke()}return{element:a.canvas,width:Math.floor(i.width)}}},vml:{_initializeSurface:function(e,g,j){var b=document.createElement("v:shape"),h=this.getTextExtents(e,g,j);b.style.width=b.style.height=g.fontSize+d;b.style.marginLeft="-1px";if(h.x>h.ha)b.style.marginRight=this.pixelsFromPoints(e,g,h.x-h.ha,f)+d;this.applyElementVerticalMetrics(e,g,b);var i=e.resolution*100/72;b.coordsize=i/g.fontStretchPercent+a+i;b.coordorigin="0,"+e.ascender;b.style.flip="y";b.fillColor=g.color;b.stroked=false;b.path="hh m 0,"+e.ascender+" l 0,"+e.descender+c;return b},_renderGlyph:function(u,s,p,j,v,e){var f=s.glyphs[p];if(!f){this.log("glyph not defined: "+p);this.renderGlyph(u,s,this.fallbackCharacter,j,v);return}e.push("m");if(f.o){var b,k;if(f.cached_outline){b=f.cached_outline;k=b.length}else{b=f.o.split(c);k=b.length;for(var d=0;d<k;)switch(b[d++]){case"q":b[d]=Math.round(b[d++]);b[d]=Math.round(b[d++]);case"m":case"l":b[d]=Math.round(b[d++]);b[d]=Math.round(b[d++])}f.cached_outline=b}for(var l,m,d=0;d<k;){var t=b[d++],h=Math.round(b[d++])+j,i=Math.round(b[d++]);switch(t){case"m":e.push("xm ",h,a,i);break;case"l":e.push(g,h,a,i);break;case"q":var w=b[d++]+j,x=b[d++],n=Math.round(l+2/3*(w-l)),o=Math.round(m+2/3*(x-m)),q=Math.round(n+(h-l)/3),r=Math.round(o+(i-m)/3);e.push("c ",n,a,o,a,q,a,r,a,h,a,i);break;case"b":var n=Math.round(b[d++])+j,o=b[d++],q=Math.round(b[d++])+j,r=b[d++];e.push("c ",n,a,o,a,q,a,r,a,h,a,i)}l=h;m=i}}e.push("x e");return e},_renderWord:function(d,h,r){var k=this,i=0,n=k.initializeSurface(d,h,r),l=h.letterSpacing&&h.letterSpacing!=b?k.pointsFromPixels(d,h,h.letterSpacing):0;l=Math.round(l);for(var p=r.split(""),e=[],o=0;o<p.length;o++){var q=p[o];e=k.renderGlyph(n,d,q,i,h,e);i+=d.glyphs[q].ha+l}if(h.textDecoration==m){var j=d.underlinePosition-d.underlineThickness/2;e.push("xm ",0,a,j);e.push(g,i,a,j);e.push(g,i,a,j+d.underlineThickness);e.push(g,0,a,j+d.underlineThickness);e.push(g,0,a,j);e.push("x e")}n.path+=e.join("")+"m "+i+" 0 l "+i+c+d.ascender;return{element:n,width:Math.floor(k.pixelsFromPoints(d,h,i,f))}}}},setVectorBackend:function(d){this.vectorBackend=d;for(var b=["renderWord","initializeSurface","renderGlyph"],a=0;a<b.length;a++){var c=b[a];this[c]=this.vectorBackends[d]["_"+c]}},initialize:function(){if(arguments.callee.done)return;arguments.callee.done=true;window._typefaceTimer&&clearInterval(q);this.renderDocument(function(a){a.style.visibility="visible"})}},n=[".typeface-js","h1","h2","h3","h4","h5","h6"];if(document.createStyleSheet){for(var h=document.createStyleSheet(),o=0;o<n.length;o++){var r=n[o];h.addRule(r,"visibility: hidden")}h.addRule(".typeface-js-selected-text",'-ms-filter: \t\t\t"Chroma(color=black) \t\t\tprogid:DXImageTransform.Microsoft.MaskFilter(Color=white) \t\t\tprogid:DXImageTransform.Microsoft.MaskFilter(Color=blue) \t\t\talpha(opacity=30)" !important; \t\tcolor: black; \t\tfont-family: Modern; \t\tposition: absolute; \t\twhite-space: pre; \t\tfilter: alpha(opacity=0) !important;');h.addRule(".typeface-js-vector-container","position: relative")}else if(document.styleSheets){!document.styleSheets.length&&(function(){var a=document.createElement("style");a.type="text/css";document.getElementsByTagName("head")[0].appendChild(a)})();var h=document.styleSheets[0];document.styleSheets[0].insertRule(n.join(a)+" { visibility: hidden; }",h.cssRules.length);document.styleSheets[0].insertRule(".typeface-js-selected-text { \t\t\tcolor: rgba(128, 128, 128, 0); \t\t\topacity: 0.30; \t\t\tposition: absolute; \t\t\tfont-family: Arial, sans-serif; \t\t\twhite-space: pre \t\t}",h.cssRules.length);try{document.styleSheets[0].insertRule(".typeface-js-selected-text::-moz-selection { background: blue; }",h.cssRules.length)}catch(t){}try{document.styleSheets[0].insertRule(".typeface-js-selected-text::selection { background: blue; }",h.cssRules.length)}catch(t){}/WebKit/i.test(navigator.userAgent)&&document.styleSheets[0].insertRule(".typeface-js-vector-container { position: relative }",h.cssRules.length)}var p=!!(window.attachEvent&&!window.opera)?e:window.CanvasRenderingContext2D||document.createElement(l).getContext?l:null;if(p==e){document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");var h=document.createStyleSheet();h.addRule("v\\:shape","display: inline-block;")}i.setVectorBackend(p);window._typeface_js=i;if(/WebKit/i.test(navigator.userAgent))var q=setInterval(function(){/loaded|complete/.test(document.readyState)&&i.initialize()},10);document.addEventListener&&window.addEventListener("DOMContentLoaded",function(){i.initialize()},false);/*@cc_on@if(@_win32)document.write("<script id=__ie_onload_typeface defer src=//:><\/script>");var s=document.getElementById("__ie_onload_typeface");s.onreadystatechange=function(){this.readyState=="complete"&&i.initialize()};@end@*/try{console.log("initializing typeface.js")}catch(t){}})();
_typeface_js.configure({ disableSelection: true })

