<html>
<head>
	<style type="text/css">
		* { font: 12px Verdana; }
		.dotted-box {
			padding: 3px;
			background-image: url('images/line.png');
		}

		.dotted-box, .regular-box {
			top: 10px;
			/*position: absolute;*/
		}
		.regular-box {
			padding: 10px;
			margin-bottom: 30px;
			margin-right: 30px;
		}
		
		.inner-box {
			padding: 8px;
			background-color: white;
		}
	</style>
	<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
</head>
<body>

	<div id="Target" class="regular-box" style="width:285px;height:108px;border: 1px dotted black">
		Regular box with dotted border.
	</div>
	<br />
	w + 2p = 3x + 2<br />
	h + 2p = 3x + 2<br />
	<br />
	<br />
	<br />
	wo = w + 2p - 2 (= 3x)<br />
	ho = h + 2p - 3 (= 3y + 2)<br />
	po = 3<br />
	bg-img: url('images/line.png')<br /><br />
	
	wi = w + 2<br />
	hi = h + 2<br />
	pi = p - 2<br />
	bg-color: white<br />
	<br />
<script type="text/javascript">
function beautifyBorder(el) {
	$(el).each(function() {
		var p = parseInt($(this).css("padding-top"));
		var w = $(this).innerWidth() - 6 - (($(this).outerWidth() + 1) % 3);
		var h = $(this).innerHeight() - 6 - (($(this).outerHeight() + 1) % 3);

		$(this).css({
			width: w,
			height: h - 1,
			padding: 3,
			border: "none",
			backgroundImage: "url(images/line.png)"
		});
		$(this).wrapInner(
			"<div style='width:" + (w - p - p + 4) + "px;height:" + (h - p - p + 4) + "px;padding:" + (p - 2) + "px;background-color:white' />"
		);
	});
}

$(document).ready(function() {
	beautifyBorder($("#Target"));
});
</script>

	<div class="dotted-box" style="width:303px;height:125px">
		<div class="inner-box" style="width:287px;height:110px">
			The line is created by a 3x3 png which is used as background image for the outer div.<br />
			Its width must be a multiple of 3, its height a multiple of 3 plus 2.<br />
			The inner div must 16px smaller in width, 15px smaller in height.
		</div>
	</div>

	
</body>
</html>